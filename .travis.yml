language: python
python:
- '3.6'
cache: pip
branches:
  only:
  - master
before_install:
- sudo apt-get update
- if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi
- bash miniconda.sh -b -p $HOME/miniconda
- source "$HOME/miniconda/etc/profile.d/conda.sh"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda info -a
install:
- conda create -q -n build-environment python=$TRAVIS_PYTHON_VERSION
- conda activate build-environment
- conda install -c anaconda -c conda-forge -c plotly --yes --file requirements.txt
script:
- make publish
before_deploy:
- npm install -g netlify-cli
deploy:
  provider: script
  script: netlify deploy -s $NETLIFY_SITE_ID -a $NETLIFY_AUTH_TOKEN -p
  skip_cleanup: true
env:
  global:
  - secure: MZWuiHpZMKnLGWLhPMY1SZs6IMtB1QpzmHZsbGNMkj12ZnkCD1yOn3OGBkjEnNJN+zNVCrzySgAaM4dw2hHHHwA7YU8Q/isk4D8t0mqH7WbxCo2cf92zeuLWP8YWwbhQEHXC5LxCHaSTjGj9fmjUGTYqT6g3pdJa1roB2VUeY6ceDBIShmlvZp5qHG91w7w9jPKobv8QlkLtasYTTWbz8GuPBWlxkSHMyfsKVwQrPWbkF2+0Jug2WXv2kHe5q0SN6SdymxjKIvrVIsxyKn8EW6S7ySBPw3qRrrCfbVUh9fYFxAqIEkHuft9iUwFiu1mNDyLICdd2nNlBYXS10tgC1VIYTgXz8OpHuLz6hSE1zqaKwkAqmzA1wGHSepgKiHVdOGT3wFYzpIVay09loSetWnfKCun+T/lEntoKt5tw3lNrJqo443lS8sEfUOC0lOtM8U4a5pylIYY8IHBJiEngg7OaUvs1BD5OhwsooJhh6CLPeIb5/rJKtym7d2CAnFjHoOgh7Oy2lnsuHkt+6TdydJGlAUK9ro6jAMkCa8kyxKedKT/inG05AsFAX1OWpvY4Fg+Wp8J/arVbX7ztaPZVkMyY/OG/7YyARljMkfwQRQggCKcqfyMppaDtqEdatPyyI7/wTp6g8GL2TJl3RBLQFMXbxViqlIc3bh8DYxidznA=
  - secure: xAdoRvvkFcD/NI3+NstwvmbMx3Lxt70F7jEOhfbkbvW/fTgvUvcvtYRvoR9XnbX3hL1dNsw7KWQVxjb7x77BfEwLPbm6p/MZ3yuBJhmZGgwFwi0ISGqYnutHLdakfxtzPfClthS1972fa2gzyQMWYLb4b8wdGhxs0uj8Cqqea1n09qvWOlyhuzpf9DAT2ttdxX5HveANr/gqa3R89Nf9alGJD1NdYOgIvlI1LqaaMpKSc+eTTOa6kRlX4+LdFgBk5ajNb2sC+Z0scAcKBOahkYW6UBKkIQwt2Eb8OaFCaZmoY7v/QkiVaqVdZe+STQpCgHge9zk75kREZCWD4ssLnaQnsLdDFtCAnIBbhMkvoHnbYYzAQe95CA1KAzBdt9CSO1tCv+OsJn2Tv1anqi9wfYVmF8g7ugcSPAjR9qiKuWWyBLLZECGsCNwCtIJH/iWLVQK7KFGTjE46egpifAGT3acwScStPsb4Q2kGZOjbQd0zdfl7Dysm8fRd7iLk7CNhBzTXSMdqDjBdd4m3tjw2+VpLT18oTOfYW+AhXEAl469w87tIUhljkGJZ5gqAyjjLwTH9PrMQVC63TxxvC9L9jDLN0R0ATzAhgdnX3/UW/d+xPn8IjTEpGICA1682lVulLhhAkjCbhCPWs5g+60Gx5xxHOgVR9zSc5n1BJNiTh6Q=
